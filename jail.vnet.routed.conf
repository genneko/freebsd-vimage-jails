exec.start = "/bin/sh /etc/rc";
exec.stop = "/bin/sh /etc/rc.shutdown";
exec.clean;
mount.devfs;

host.hostname = $name;
path = "/vm/$name";
exec.consolelog = "/var/log/jail_${name}_console.log";

xxx {
	$net = "vi0";
	$gwv4 = "172.31.0.1";
	$ipv4 = "172.31.0.11";
	$plen = 24;

	vnet;
	vnet.interface = "${net}_$name";
	exec.prestart += "vnet add -4 $gwv4/$plen $net ${net}_$name";
	exec.start    += "ifconfig ${net}_$name $ipv4/$plen";
	# assume the host has been setup as a router.
	exec.start    += "route add default $gwv4";
	# workaround
	# https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=238326
	exec.prestop  += "ifconfig ${net}_$name -vnet $name";
	exec.poststop += "vnet delete $net ${net}_$name";
}

